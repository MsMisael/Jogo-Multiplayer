(()=>{"use strict";document.title="Meu Primeiro Jogo Multiplayer";var e=document.createElement("style");e.innerHTML="#screen {\n    border: 1px solid #CCC;\n    image-rendering:pixelated;\n    image-rendering:crisp-edges;\n    image-rendering:-moz-crisp-edges;\n    width:500px;\n    height:500px;\n}",e.type="text/css";var r=document.createElement("canvas");r.id="screen",document.querySelector("head").appendChild(e),document.querySelector("body").appendChild(r);const t=r;var n=t.getContext("2d");function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var i=function(){var e={players:{},fruits:{},screen:{width:10,height:10}};function r(r){var t=r.fruitId,n=r.fruitX,a=r.fruitY;e.fruits[t]={x:n,y:a}}function t(r){delete e.fruits[r]}return{movePlayer:function(n){var a={ArrowUp:function(e){e.y-1>=0&&(e.y=e.y-1)},ArrowRight:function(r){r.x+1<e.screen.width&&(r.x=r.x+1)},ArrowDown:function(r){r.y+1<e.screen.height&&(r.y=r.y+1)},ArrowLeft:function(e){e.x-1>=0&&(e.x=e.x-1)}},i=n.keyPressed,o=e.players[n.playerId],u=a[i],l=n.playerId;o&&u&&(u(o),function(n){var a=e.players[n];for(var i in e.fruits){var o=e.fruits[i];a.x===o.x&&a.y===o.y&&(t(i),r({fruitId:i,fruitX:Math.floor(10*Math.random()),fruitY:Math.floor(10*Math.random())}))}}(l))},addPlayer:function(r){var t=r.playerId,n=r.playerX,a=r.playerY;e.players[t]={x:n,y:a}},removePlayer:function(r){var t=r.playerId;delete e.players[t]},addFruit:r,removeFruit:t,state:e,screen}}();i.addFruit({fruitId:"1",fruitX:Math.floor(10*Math.random()),fruitY:3}),i.addFruit({fruitId:"2",fruitX:7,fruitY:5}),i.addFruit({fruitId:"3",fruitX:6,fruitY:8}),i.addPlayer({playerId:"player1",playerX:Math.floor(10*Math.random()),playerY:Math.floor(10*Math.random())}),function(e){t.width=e.state.screen.width,t.height=e.state.screen.height,requestAnimationFrame((function r(){for(var t in n.clearRect(0,0,e.state.screen.width,e.state.screen.height),e.state.fruits){var a=e.state.fruits[t];n.fillStyle="red",n.fillRect(a.x,a.y,1,1)}for(var i in e.state.players){var o=e.state.players[i];n.fillStyle="black",n.fillRect(o.x,o.y,1,1)}requestAnimationFrame(r)}))}(i),function(e){e.addEventListener("keydown",(function(e){!function(e){var t,n=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return a(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return u=e.done,e},e:function(e){l=!0,o=e},f:function(){try{u||null==t.return||t.return()}finally{if(l)throw o}}}}(r.observers);try{for(n.s();!(t=n.n()).done;)(0,t.value)(e)}catch(e){n.e(e)}finally{n.f()}}({playerId:"player1",keyPressed:e.key})}));var r={observers:[]};return{subscribe:function(e){r.observers.push(e)}}}(document).subscribe(i.movePlayer)})();